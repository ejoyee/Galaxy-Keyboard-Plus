# 2025-04-22 TIL

## MCP 

### MCP 개념
- 개발자들이 다양한 서비스들을 사용하려면 "API"를 이용해서 코딩 
- AI가 다른 서비스들을 사용하고 소통하기 위해서 "MCP"를 이용
-> MCP는 AI가 효율적으로 서비스와 소통하기 위한 프로토콜을 제공해서 사용자 입장에서 서버만 설치하면 되도록 하는 서비스

### MCP 구조
- 호스트 : AI 모델을 직접적으로 사용하는 서비스
- 클라이언트 : 서버와 호스트 간의 소통을 도와주는 역할
- 서버 : 다양한 서비스들을 표준화된 방식으로 활용할 수 있게 도와주는 역할 -> 연결하고 싶은 서비스마다 서버 설치 필요
- 리소스 : AI가 사용하고자 하는 서비스 주체
-> 서버만 설치하면 호스트에서 리소스를 바로 사용 가능 (기존에 코딩으로 플랫폼 별 API를 지정해주던 방식을 대체 + 인증, 설정)

## 🚀 서비스 구조: “모듈형 MCP 검증 및 적용 시스템”

### 🎯 **목표**

비개발자도 LLM을 능숙하게 활용할 수 있도록,

✅ **검증된 MCP(Meta Prompt / Model Customization Protocol)**만 골라서

✅ 사용자에게 제공하고

✅ 사용자가 고른 MCP를 기반으로

✅ 모든 LLM 응답이 자동 커스터마이징되도록 만드는 시스템

---

## 🧩 구성 요소 및 흐름

### 1. ✅ **MCP 라이브러리 관리 시스템 (운영자용)**

운영자는 MCP를 생성하고 테스트한 뒤, 검증된 것만 사용자에게 공개

| 기능 | 설명 |
| --- | --- |
| **MCP 등록 및 생성** | System Prompt, 기본 설정, 출력 형식 등 입력 |
| **MCP 테스트 도구** | 다양한 입력 시나리오로 직접 테스트 가능 (간단 UI 또는 API 테스트) |
| **성능 평가 기록** | 응답의 정확도, 스타일, 시간 등 평가 후 태그/코멘트 저장 |
| **공개 여부 전환** | 검증 완료된 MCP만 “사용자 선택 가능”으로 전환 |

💡 예: 운영자만 볼 수 있는 “MCP 스테이징 영역” → 테스트 후 “실사용 MCP”로 푸시

---

### 2. 🙋‍♀️ **사용자용 MCP 선택 인터페이스**

비개발자도 직관적으로 고를 수 있도록 구성

| 기능 | 설명 |
| --- | --- |
| **MCP 프리셋 카드 UI** | “요약 전문가”, “법률 상담 스타일”, “학생 맞춤형 설명” 등 선택 가능 |
| **미리보기 기능** | 샘플 입력/출력 확인 가능 (“이런 식으로 응답됩니다”) |
| **즐겨찾기/기본 MCP 설정** | 나만의 기본 MCP로 설정하여 매번 자동 적용 |

✅ 선택한 MCP는 DB에 저장되어 사용자 요청 시 자동 적용됨

---

### 3. ⚙️ **LLM 자동화 응답 엔진**

LLM을 호출할 때, 선택한 MCP를 항상 포함시켜 처리

| 기능 | 설명 |
| --- | --- |
| **사용자별 MCP 연동 미들웨어** | DB에서 사용자 선택 MCP → LLM 호출 시 `system message`로 자동 포함 |
| **Fallback 처리** | MCP 미설정 시 기본 MCP 적용 or 사용자에게 안내 |
| **세션/토픽별 MCP 전환 가능** | 상황에 따라 MCP를 바꾸는 것도 지원 (예: 요약 → 해석) |

---

### 4. 📊 **관리자 대시보드**

| 기능 | 설명 |
| --- | --- |
| **MCP 사용률 분석** | 어떤 MCP가 가장 인기 있는지 시각화 |
| **응답 품질 피드백 수집** | thumbs up/down 또는 코멘트 수집 |
| **MCP 개선 히스토리** | 프롬프트 수정 기록 및 결과 비교 로그 저장 |

## 🧠 유저 경험 (UX) 흐름 요약

1. 사용자는 처음 접속 시 “AI 사용 스타일(MCP)”을 고름
2. 매번 LLM 사용 시, 자동으로 해당 스타일로 대화 진행
3. 원하는 때 MCP를 바꾸거나 새로 만들 수도 있음
4. 운영자는 MCP를 테스트 → 승인 → 사용자에게 노출

## 🎁 이 시스템이 주는 장점

✅ **비개발자도 AI를 전문가처럼 사용**

✅ **일관된 스타일/품질 보장**

✅ **MCP 테스트 & 검증 프로세스를 통해 서비스 신뢰도 확보**

✅ **서비스 브랜딩 가능 (예: GPTOnline의 “문서 요약봇”, “상담 어시스턴트”)**

## ✅ “외부 API 연동형 MCP”로 분리

MCP 관리 시스템에서 구분:

- ✅ **기본 MCP (프롬프트 기반)** – 그냥 LLM 호출 시 텍스트만 조작
- 🔐 **API 연동 MCP** – 외부 API + 인증 필요 (예: Notion, Google Docs, Slack, Jira 등)

➡️ API 연동 MCP는 **“OAuth 인증 완료 후에만 사용 가능”** 조건을 설정하고 UI도 달리 구성해야 해요.